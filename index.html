<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>repl.it</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
  </head>
  <body>

    <canvas id="myCanvas" width="500" height="500"></canvas>
    <p id="p1"></p>
    <style>
      #myCanvas {background-color: silver;}
      
    </style>
    <script>
      // get a reference to the DOM element
      var c = document.getElementById("myCanvas");
      
      // get a reference to the "2d context", basically, the set of pixels
      var ctx = c.getContext("2d");

      //var background = new Image();
      //background.src //="https://1s8svh3tfyxvnubqz3r12buu-wpengine.netdna-ssl.com/wp-content/uploads/20//16/12/Example-Image.gif";

      // Make sure the image is loaded first otherwise nothing will draw.
      //background.onload = function(){
          //ctx.drawImage(background,0,0);   
      //}

    </script>

    
    <script>
    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");
    var score;

    var harm = {x: Math.random() * c.width,
                  y: 50,
                  dir: -1,
                  radius: 4,
                  speed: .5};
                
    var player = {x: 250,
                  y: 475,
                  dir: -1,
                  radius: 4,
                  speed: 1};

    var benefit = {x: Math.random() * c.width,
                  y: 50,
                  dir: -1,
                  radius: 4,
                  speed: 1};


    var keys = {
            up: false,
            down: false,
            left: false,
            right: false
        };


    function draw(){
      // Create gradient
      //var grd = ctx.createRadialGradient(75, 50, 5, 90, 60, 100);
      //grd.addColorStop(0, "red");
      //grd.addColorStop(1, "black");


      // clear the box first
      ctx.clearRect(0,0,c.width, c.height);
      ctx.beginPath();
      ctx.arc(harm.x,harm.y,harm.radius,0,2*Math.PI);
      ctx.stroke();
      // Fill with gradient
      //ctx.fillStyle = grd;
      ctx.fill();



      harm.y -= harm.dir * harm.speed;
      if (harm.y >= 500) {
        harm.x = Math.floor(Math.random() * c.width);
        harm.y = 0;
        //harm.speed += .1;
      }


      ctx.beginPath();
      ctx.arc(benefit.x,benefit.y,benefit.radius,0,2*Math.PI);
      ctx.stroke();
      benefit.y -= benefit.dir * benefit.speed;
      if (benefit.y >= 500) {
        benefit.x = Math.floor(Math.random() * c.width);
        benefit.y = 0;
        //harm.speed += .1;
      }

      ctx.beginPath();
      ctx.arc(player.x,player.y,player.radius,0,2*Math.PI);
      ctx.stroke();
      ctx.fill()

          window.onkeydown = function(e) {
            var kc = e.keyCode;
            e.preventDefault();

            if      (kc === 37) keys.left = true;  // only one key per event
            else if (kc === 38) keys.up = true;    // so check exclusively
            else if (kc === 39) keys.right = true;
            else if (kc === 40) keys.down = true;
        };

        window.onkeyup = function(e) {
            var kc = e.keyCode;
            e.preventDefault();

            if      (kc === 37) keys.left = false;
            else if (kc === 38) keys.up = false;
            else if (kc === 39) keys.right = false;
            else if (kc === 40) keys.down = false;
        };

        if (keys.left) {
            player.x -=1;
        }
        else if (keys.right) {
            player.x +=1;
        }

        //collision
        collision(player.x, benefit.x);

      
      window.requestAnimationFrame(draw)
    }


    function collision(obj1, obj2) {
      if (obj1.x <= 0 + obj2.radius){
        return true;
      } else if (obj1.x >= (obj2.width - obj2.radius)) {
        return false;
      }

    }


    function main(){
      draw();

    }

    main();

    </script> 




  </body>





</html>